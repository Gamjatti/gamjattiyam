<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï§ëÍµ≠Ïñ¥ ÏùÄÌñâ ÌöåÌôî ÌïôÏäµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .mode-btn.active {
            background: white;
            color: #667eea;
            transform: scale(1.05);
        }

        .card-container {
            perspective: 1000px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            min-height: 400px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .card-type {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .chinese {
            font-size: 22px;
            margin-bottom: 10px;
            line-height: 1.6;
            color: #333;
        }

        .pinyin {
            font-size: 16px;
            color: #667eea;
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .korean {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
        }

        .tts-btn {
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            bottom: 20px;
            right: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .tts-btn:active {
            transform: scale(0.95);
            background: #45a049;
        }

        .blank {
            color: #ff6b6b;
            font-weight: bold;
            text-decoration: underline;
            text-decoration-style: dashed;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .control-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .prev-btn {
            background: #f8f9fa;
            color: #333;
        }

        .next-btn {
            background: #667eea;
            color: white;
        }

        .flip-btn {
            background: #764ba2;
            color: white;
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .progress {
            text-align: center;
            color: white;
            margin-top: 15px;
            font-size: 16px;
            font-weight: bold;
        }

        .cloze-input {
            background: #fff3cd;
            border: 2px dashed #ffc107;
            border-radius: 5px;
            padding: 2px 8px;
            margin: 0 3px;
            min-width: 60px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè¶ Ï§ëÍµ≠Ïñ¥ ÏùÄÌñâ ÌöåÌôî</h1>
        
        <div class="mode-selector">
            <button class="mode-btn active" onclick="setMode('all')">Ï†ÑÏ≤¥</button>
            <button class="mode-btn" onclick="setMode('dialogue')">ÎåÄÌôîÎßå</button>
            <button class="mode-btn" onclick="setMode('narration')">ÎÇ¥Î†àÏù¥ÏÖòÎßå</button>
            <button class="mode-btn" onclick="setMode('cloze')">ÏãúÌóòÎ™®Îìú</button>
        </div>

        <div class="card-container">
            <div class="card" id="flashcard">
                <div class="card-face card-front">
                    <div class="card-type" id="cardType">ÎåÄÌôî</div>
                    <div id="frontContent"></div>
                    <button class="tts-btn" onclick="speakChinese()">üîä</button>
                </div>
                <div class="card-face card-back">
                    <div id="backContent"></div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn prev-btn" onclick="prevCard()">‚Üê Ïù¥Ï†Ñ</button>
            <button class="control-btn flip-btn" onclick="flipCard()">Îí§ÏßëÍ∏∞</button>
            <button class="control-btn next-btn" onclick="nextCard()">Îã§Ïùå ‚Üí</button>
        </div>

        <div class="progress" id="progress">1 / 20</div>
    </div>

    <script>
        const cards = [
            {
                type: 'narration',
                chinese: '‰ªäÂ§©‰∏äÂçàÔºåÂ∞è‰∏ΩÂéªÈì∂Ë°åÂèñÈí±„ÄÇ',
                pinyin: 'Jƒ´ntiƒÅn sh√†ngw«î, Xi«éol√¨ q√π y√≠nh√°ng q«î qi√°n.',
                korean: 'Ïò§Îäò Ïò§Ï†Ñ, ÏÉ§Ïò§Î¶¨Îäî ÏùÄÌñâÏóê ÎèàÏùÑ Ï∞æÏúºÎü¨ Í∞îÎã§.',
                cloze: '‰ªäÂ§©‰∏äÂçàÔºåÂ∞è‰∏ΩÂéª___ÂèñÈí±„ÄÇ',
                answer: 'Èì∂Ë°å'
            },
            {
                type: 'narration',
                chinese: 'Èì∂Ë°åÈáå‰∫∫‰∏çÂ§öÔºåÂæàÂÆâÈùô„ÄÇ',
                pinyin: 'Y√≠nh√°ng l«ê r√©n b√∫ du≈ç, hƒõn ƒÅnj√¨ng.',
                korean: 'ÏùÄÌñâ ÏïàÏóêÎäî ÏÇ¨ÎûåÏù¥ ÎßéÏßÄ ÏïäÏïÑ Ï°∞Ïö©ÌñàÎã§.',
                cloze: 'Èì∂Ë°åÈáå‰∫∫‰∏çÂ§öÔºåÂæà___„ÄÇ',
                answer: 'ÂÆâÈùô'
            },
            {
                type: 'narration',
                chinese: 'Â•πÊãøÁùÄÈì∂Ë°åÂç°ÔºåÊéíÈòüÁ≠âÂÄô„ÄÇ',
                pinyin: 'TƒÅ n√°zhe y√≠nh√°ngk«é, p√°idu√¨ dƒõngh√≤u.',
                korean: 'Í∑∏ÎÖÄÎäî ÏùÄÌñâÏπ¥ÎìúÎ•º Îì§Í≥† Ï§ÑÏùÑ ÏÑúÏÑú Í∏∞Îã§Î†∏Îã§.',
                cloze: 'Â•πÊãøÁùÄÈì∂Ë°åÂç°Ôºå___Á≠âÂÄô„ÄÇ',
                answer: 'ÊéíÈòü'
            },
            {
                type: 'narration',
                chinese: 'ËΩÆÂà∞Â∞è‰∏Ω‰∫ÜÔºåÂ•πËµ∞Âà∞Á™óÂè£Ââç„ÄÇ',
                pinyin: 'L√∫nd√†o Xi«éol√¨ le, tƒÅ z«íu d√†o chuƒÅngk«íu qi√°n.',
                korean: 'ÏÉ§Ïò§Î¶¨ Ï∞®Î°ÄÍ∞Ä ÎêòÏûê, Ï∞ΩÍµ¨ ÏïûÏúºÎ°ú Í∞îÎã§.',
                cloze: '___Â∞è‰∏Ω‰∫ÜÔºåÂ•πËµ∞Âà∞Á™óÂè£Ââç„ÄÇ',
                answer: 'ËΩÆÂà∞'
            },
            {
                type: 'dialogue',
                chinese: '‰Ω†Â•ΩÔºåËØ∑ÈóÆ‰Ω†Ë¶ÅÂäû‰ªÄ‰πàÔºü',
                pinyin: 'N«êh«éo, q«êngw√®n n«ê y√†o b√†n sh√©nme?',
                korean: 'ÏïàÎÖïÌïòÏÑ∏Ïöî, Î¨¥ÏóáÏùÑ ÎèÑÏôÄÎìúÎ¶¥ÍπåÏöî?',
                cloze: '‰Ω†Â•ΩÔºåËØ∑ÈóÆ‰Ω†Ë¶Å___‰ªÄ‰πàÔºü',
                answer: 'Âäû'
            },
            {
                type: 'dialogue',
                chinese: '‰Ω†Â•ΩÔºåÊàëÊÉ≥ÂèñÈí±„ÄÇ',
                pinyin: 'N«êh«éo, w«í xi«éng q«î qi√°n.',
                korean: 'ÏïàÎÖïÌïòÏÑ∏Ïöî, ÎèàÏùÑ Ï∞æÍ≥† Ïã∂Ïñ¥Ïöî.',
                cloze: '‰Ω†Â•ΩÔºåÊàëÊÉ≥___Èí±„ÄÇ',
                answer: 'Âèñ'
            },
            {
                type: 'dialogue',
                chinese: 'Â•ΩÁöÑÔºåËØ∑ÁªôÊàë‰Ω†ÁöÑÈì∂Ë°åÂç°„ÄÇ',
                pinyin: 'H«éo de, q«êng gƒõi w«í n«ê de y√≠nh√°ngk«é.',
                korean: 'ÎÑ§, ÎãπÏã†Ïùò ÏùÄÌñâÏπ¥ÎìúÎ•º Ï£ºÏÑ∏Ïöî.',
                cloze: 'Â•ΩÁöÑÔºåËØ∑ÁªôÊàë‰Ω†ÁöÑ___„ÄÇ',
                answer: 'Èì∂Ë°åÂç°'
            },
            {
                type: 'dialogue',
                chinese: 'Â•ΩÁöÑÔºåÂú®ËøôÈáå„ÄÇ',
                pinyin: 'H«éo de, z√†i zh√®l«ê.',
                korean: 'ÎÑ§, Ïó¨Í∏∞Ïöî.',
                cloze: 'Â•ΩÁöÑÔºåÂú®___„ÄÇ',
                answer: 'ËøôÈáå'
            },
            {
                type: 'dialogue',
                chinese: '‰Ω†Ë¶ÅÂèñÂ§öÂ∞ëÈí±Ôºü',
                pinyin: 'N«ê y√†o q«î du≈çshao qi√°n?',
                korean: 'ÏñºÎßàÎ•º Ï∞æÏúºÏã§ Í±¥Í∞ÄÏöî?',
                cloze: '‰Ω†Ë¶ÅÂèñ___Èí±Ôºü',
                answer: 'Â§öÂ∞ë'
            },
            {
                type: 'dialogue',
                chinese: 'Âèñ‰∫îÂçÉÂùó„ÄÇ',
                pinyin: 'Q«î w«îqiƒÅn ku√†i.',
                korean: '5Ï≤ú ÏúÑÏïàÏùÑ Ï∞æÏùÑÍ≤åÏöî.',
                cloze: 'Âèñ___Âùó„ÄÇ',
                answer: '‰∫îÂçÉ'
            },
            {
                type: 'dialogue',
                chinese: 'ËØ∑ÈóÆË¶ÅÁé∞ÈáëËøòÊòØËΩ¨Ë¥¶Ôºü',
                pinyin: 'Q«êngw√®n y√†o xi√†njƒ´n h√°ishi zhu«énzh√†ng?',
                korean: 'ÌòÑÍ∏àÏúºÎ°ú ÎìúÎ¶¥ÍπåÏöî, Ïù¥Ï≤¥Î°ú Ìï¥ÎìúÎ¶¥ÍπåÏöî?',
                cloze: 'ËØ∑ÈóÆË¶ÅÁé∞ÈáëËøòÊòØ___Ôºü',
                answer: 'ËΩ¨Ë¥¶'
            },
            {
                type: 'dialogue',
                chinese: 'Ë¶ÅÁé∞Èáë„ÄÇ',
                pinyin: 'Y√†o xi√†njƒ´n.',
                korean: 'ÌòÑÍ∏àÏúºÎ°úÏöî.',
                cloze: 'Ë¶Å___„ÄÇ',
                answer: 'Áé∞Èáë'
            },
            {
                type: 'dialogue',
                chinese: 'Â•ΩÁöÑÔºåËØ∑ËæìÂÖ•ÂØÜÁ†Å„ÄÇ',
                pinyin: 'H«éo de, q«êng sh≈´r√π m√¨m«é.',
                korean: 'ÎÑ§, ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.',
                cloze: 'Â•ΩÁöÑÔºåËØ∑ËæìÂÖ•___„ÄÇ',
                answer: 'ÂØÜÁ†Å'
            },
            {
                type: 'narration',
                chinese: 'Â∞è‰∏Ω‰ΩéÂ§¥ËæìÂÖ•ÂØÜÁ†Å„ÄÇ',
                pinyin: 'Xi«éol√¨ dƒ´t√≥u sh≈´r√π m√¨m«é.',
                korean: 'ÏÉ§Ïò§Î¶¨Îäî Í≥†Í∞úÎ•º ÏàôÏù¥Í≥† ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌñàÎã§.',
                cloze: 'Â∞è‰∏Ω___ËæìÂÖ•ÂØÜÁ†Å„ÄÇ',
                answer: '‰ΩéÂ§¥'
            },
            {
                type: 'dialogue',
                chinese: 'ËØ∑Á®çÁ≠â‰∏Ä‰∏ã„ÄÇ',
                pinyin: 'Q«êng shƒÅodƒõng y√≠xi√†.',
                korean: 'Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî.',
                cloze: 'ËØ∑___‰∏Ä‰∏ã„ÄÇ',
                answer: 'Á®çÁ≠â'
            },
            {
                type: 'dialogue',
                chinese: 'ËøôÊòØ‰Ω†ÁöÑÈí±ÔºåËØ∑ÁÇπ‰∏Ä‰∏ã„ÄÇ',
                pinyin: 'Zh√® sh√¨ n«ê de qi√°n, q«êng di«én y√≠xi√†.',
                korean: 'Ïó¨Í∏∞ ÎèàÏûÖÎãàÎã§, ÌïúÎ≤à ÏÑ∏Ïñ¥Î≥¥ÏÑ∏Ïöî.',
                cloze: 'ËøôÊòØ‰Ω†ÁöÑÈí±ÔºåËØ∑___‰∏Ä‰∏ã„ÄÇ',
                answer: 'ÁÇπ'
            },
            {
                type: 'dialogue',
                chinese: 'ÂØπÁöÑÔºå‰∏ÄÂÖ±‰∫îÂçÉÂùó„ÄÇ',
                pinyin: 'Du√¨ de, y√≠g√≤ng w«îqiƒÅn ku√†i.',
                korean: 'ÎßûÏïÑÏöî, Ï¥ù 5Ï≤ú ÏúÑÏïàÏù¥ÏóêÏöî.',
                cloze: 'ÂØπÁöÑÔºå___‰∫îÂçÉÂùó„ÄÇ',
                answer: '‰∏ÄÂÖ±'
            },
            {
                type: 'narration',
                chinese: 'Â∞è‰∏ΩÊääÈí±ÊîæËøõÂåÖÈáå„ÄÇ',
                pinyin: 'Xi«éol√¨ b«é qi√°n f√†ng j√¨n bƒÅo l«ê.',
                korean: 'ÏÉ§Ïò§Î¶¨Îäî ÎèàÏùÑ Í∞ÄÎ∞©Ïóê ÎÑ£ÏóàÎã§.',
                cloze: 'Â∞è‰∏ΩÊääÈí±___ÂåÖÈáå„ÄÇ',
                answer: 'ÊîæËøõ'
            },
            {
                type: 'dialogue',
                chinese: 'ËøôÊòØ‰Ω†ÁöÑÈì∂Ë°åÂç°ÂíåÊî∂ÊçÆ„ÄÇ',
                pinyin: 'Zh√® sh√¨ n«ê de y√≠nh√°ngk«é h√© sh≈çuj√π.',
                korean: 'Ïó¨Í∏∞ ÎãπÏã†Ïùò ÏùÄÌñâÏπ¥ÎìúÏôÄ ÏòÅÏàòÏ¶ùÏûÖÎãàÎã§.',
                cloze: 'ËøôÊòØ‰Ω†ÁöÑÈì∂Ë°åÂç°Âíå___„ÄÇ',
                answer: 'Êî∂ÊçÆ'
            },
            {
                type: 'narration',
                chinese: 'Â∞è‰∏ΩÁ™ÅÁÑ∂ÊÉ≥Âà∞‰∏Ä‰ª∂‰∫ãÔºåÂèàÈóÆ‰∫ÜÂ∑•‰Ωú‰∫∫Âëò„ÄÇ',
                pinyin: 'Xi«éol√¨ t≈´r√°n xi«éngd√†o y√≠ ji√†n sh√¨, y√≤u w√®n le g≈çngzu√≤r√©nyu√°n.',
                korean: 'ÏÉ§Ïò§Î¶¨Îäî Í∞ëÏûêÍ∏∞ Ìïú Í∞ÄÏßÄÍ∞Ä Îñ†Ïò¨Îùº Îã§Ïãú ÏßÅÏõêÏóêÍ≤å Î¨ºÏóàÎã§.',
                cloze: 'Â∞è‰∏Ω___ÊÉ≥Âà∞‰∏Ä‰ª∂‰∫ãÔºåÂèàÈóÆ‰∫ÜÂ∑•‰Ωú‰∫∫Âëò„ÄÇ',
                answer: 'Á™ÅÁÑ∂'
            },
            {
                type: 'dialogue',
                chinese: '‰∏çÂ•ΩÊÑèÊÄùÔºåÊàëÂèØ‰ª•È°∫‰æøÈóÆ‰∏Ä‰∏ãÂêóÔºü',
                pinyin: 'B√πh«éoy√¨si, w«í kƒõy«ê sh√πnbi√†n w√®n y√≠xi√† ma?',
                korean: 'Ï£ÑÏÜ°ÌïúÎç∞, ÌòπÏãú Í≤∏ÏÇ¨Í≤∏ÏÇ¨ ÌïòÎÇò Î¨ºÏñ¥Î¥êÎèÑ Îê†ÍπåÏöî?',
                cloze: '‰∏çÂ•ΩÊÑèÊÄùÔºåÊàëÂèØ‰ª•___ÈóÆ‰∏Ä‰∏ãÂêóÔºü',
                answer: 'È°∫‰æø'
            },
            {
                type: 'dialogue',
                chinese: 'Â¶ÇÊûúÈì∂Ë°åÂç°‰∏¢‰∫ÜÔºåÊÄé‰πàÂäûÔºü',
                pinyin: 'R√∫gu«í y√≠nh√°ngk«é di≈´ le, zƒõnme b√†n?',
                korean: 'ÎßåÏïΩ ÏùÄÌñâÏπ¥ÎìúÎ•º ÏûÉÏñ¥Î≤ÑÎ¶¨Î©¥ Ïñ¥ÎñªÍ≤å ÌïòÎÇòÏöî?',
                cloze: 'Â¶ÇÊûúÈì∂Ë°åÂç°___‰∫ÜÔºåÊÄé‰πàÂäûÔºü',
                answer: '‰∏¢'
            },
            {
                type: 'dialogue',
                chinese: 'ÂèØ‰ª•ÂÖàÊåÇÂ§±ÔºåÁÑ∂ÂêéÂÜçË°•Âäû‰∏ÄÂº†Êñ∞Âç°„ÄÇ',
                pinyin: 'Kƒõy«ê xiƒÅn gu√†shƒ´, r√°nh√≤u z√†i b«îb√†n y√¨ zhƒÅng xƒ´n k«é.',
                korean: 'Î®ºÏ†Ä Î∂ÑÏã§Ïã†Í≥†Î•º ÌïòÍ≥†, Í∑∏ Îã§Ïùå ÏÉà Ïπ¥ÎìúÎ•º Ïû¨Î∞úÍ∏âÌïòÎ©¥ Îê©ÎãàÎã§.',
                cloze: 'ÂèØ‰ª•ÂÖà___ÔºåÁÑ∂ÂêéÂÜçË°•Âäû‰∏ÄÂº†Êñ∞Âç°„ÄÇ',
                answer: 'ÊåÇÂ§±'
            },
            {
                type: 'dialogue',
                chinese: 'ÊòéÁôΩ‰∫ÜÔºåË∞¢Ë∞¢‰Ω†„ÄÇ',
                pinyin: 'M√≠ngbai le, xi√®xie n«ê.',
                korean: 'ÏïåÍ≤†ÏäµÎãàÎã§, Í∞êÏÇ¨Ìï©ÎãàÎã§.',
                cloze: '___‰∫ÜÔºåË∞¢Ë∞¢‰Ω†„ÄÇ',
                answer: 'ÊòéÁôΩ'
            },
            {
                type: 'narration',
                chinese: 'Â∞è‰∏ΩÊÖ¢ÊÖ¢Ëµ∞Âá∫Èì∂Ë°å„ÄÇ',
                pinyin: 'Xi«éol√¨ m√†nm√†n z«íu ch≈´ y√≠nh√°ng.',
                korean: 'ÏÉ§Ïò§Î¶¨Îäî Ï≤úÏ≤úÌûà ÏùÄÌñâÏùÑ ÎÇòÏôîÎã§.',
                cloze: 'Â∞è‰∏Ω___Ëµ∞Âá∫Èì∂Ë°å„ÄÇ',
                answer: 'ÊÖ¢ÊÖ¢'
            },
            {
                type: 'narration',
                chinese: '‰ªäÂ§©ÁöÑ‰∫ãÊÉÖÂäûÂæóÂæàÈ°∫Âà©ÔºåÂ•πËßâÂæóÂæàËàíÂøÉ„ÄÇ',
                pinyin: 'Jƒ´ntiƒÅn de sh√¨qing b√†n de hƒõn sh√πnl√¨, tƒÅ ju√©de hƒõn sh≈´xƒ´n.',
                korean: 'Ïò§Îäò ÏùºÏù¥ ÏïÑÏ£º ÏàúÏ°∞Î°≠Í≤å Ï≤òÎ¶¨ÎêòÏñ¥ ÎßàÏùåÏù¥ Ìé∏ÏïàÌñàÎã§.',
                cloze: '‰ªäÂ§©ÁöÑ‰∫ãÊÉÖÂäûÂæóÂæà___ÔºåÂ•πËßâÂæóÂæàËàíÂøÉ„ÄÇ',
                answer: 'È°∫Âà©'
            }
        ];

        let currentMode = 'all';
        let filteredCards = cards;
        let currentIndex = 0;
        let isFlipped = false;

        function setMode(mode) {
            currentMode = mode;
            currentIndex = 0;
            isFlipped = false;
            
            // Update button styles
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Filter cards
            if (mode === 'dialogue') {
                filteredCards = cards.filter(card => card.type === 'dialogue');
            } else if (mode === 'narration') {
                filteredCards = cards.filter(card => card.type === 'narration');
            } else {
                filteredCards = cards;
            }
            
            updateCard();
        }

        function updateCard() {
            const card = filteredCards[currentIndex];
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.remove('flipped');
            isFlipped = false;
            
            const typeLabel = card.type === 'dialogue' ? 'ÎåÄÌôî' : 'ÎÇ¥Î†àÏù¥ÏÖò';
            document.getElementById('cardType').textContent = typeLabel;
            
            if (currentMode === 'cloze') {
                document.getElementById('frontContent').innerHTML = `
                    <div class="chinese">${card.cloze}</div>
                    <div class="pinyin">${card.pinyin}</div>
                `;
                document.getElementById('backContent').innerHTML = `
                    <div class="chinese">${card.chinese}</div>
                    <div class="pinyin">${card.pinyin}</div>
                    <div class="korean">${card.korean}</div>
                    <div style="margin-top: 20px; padding: 15px; background: #e8f5e9; border-radius: 10px;">
                        <strong style="color: #2e7d32;">Ï†ïÎãµ:</strong> <span style="color: #c62828; font-size: 20px;">${card.answer}</span>
                    </div>
                `;
            } else {
                document.getElementById('frontContent').innerHTML = `
                    <div class="chinese">${card.chinese}</div>
                    <div class="pinyin">${card.pinyin}</div>
                `;
                document.getElementById('backContent').innerHTML = `
                    <div class="korean">${card.korean}</div>
                `;
            }
            
            document.getElementById('progress').textContent = 
                `${currentIndex + 1} / ${filteredCards.length}`;
        }

        function flipCard() {
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        function nextCard() {
            currentIndex = (currentIndex + 1) % filteredCards.length;
            updateCard();
        }

        function prevCard() {
            currentIndex = (currentIndex - 1 + filteredCards.length) % filteredCards.length;
            updateCard();
        }

        function speakChinese() {
            const card = filteredCards[currentIndex];
            const utterance = new SpeechSynthesisUtterance(card.chinese);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
        }

        // Initialize
        updateCard();

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') prevCard();
            if (e.key === 'ArrowRight') nextCard();
            if (e.key === ' ') {
                e.preventDefault();
                flipCard();
            }
        });

        // Touch swipe support
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) nextCard();
            if (touchEndX > touchStartX + 50) prevCard();
        }
    </script>
</body>
</html>
